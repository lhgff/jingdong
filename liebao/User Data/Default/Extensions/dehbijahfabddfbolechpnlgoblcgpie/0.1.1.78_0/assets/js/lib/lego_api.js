"undefined"!==typeof lego&&("undefined"===typeof JSON&&(JSON=function(){function r(f){return 10>f?"0"+f:f}function x(f){v.lastIndex=0;return v.test(f)?'"'+f.replace(v,function(e){var c=s[e];return"string"===typeof c?c:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+f+'"'}function p(l,e){var c,d,k,w,a=f,b,g=e[l];g&&"object"===typeof g&&"function"===typeof g.toJSON&&(g=g.toJSON(l));"function"===typeof m&&(g=m.call(e,l,g));switch(typeof g){case "string":return x(g);case "number":return isFinite(g)?
String(g):"null";case "boolean":case "null":return String(g);case "object":if(!g)return"null";f+=t;b=[];if("[object Array]"===Object.prototype.toString.apply(g)){w=g.length;for(c=0;c<w;c+=1)b[c]=p(c,g)||"null";k=0===b.length?"[]":f?"[\n"+f+b.join(",\n"+f)+"\n"+a+"]":"["+b.join(",")+"]";f=a;return k}if(m&&"object"===typeof m)for(w=m.length,c=0;c<w;c+=1)"string"===typeof m[c]&&(d=m[c],(k=p(d,g))&&b.push(x(d)+(f?": ":":")+k));else for(d in g)Object.prototype.hasOwnProperty.call(g,d)&&(k=p(d,g))&&b.push(x(d)+
(f?": ":":")+k);k=0===b.length?"{}":f?"{\n"+f+b.join(",\n"+f)+"\n"+a+"}":"{"+b.join(",")+"}";f=a;return k}}var l={};"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+r(this.getUTCMonth()+1)+"-"+r(this.getUTCDate())+"T"+r(this.getUTCHours())+":"+r(this.getUTCMinutes())+":"+r(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var q=
/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,v=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,f,t,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},m;"function"!==typeof l.stringify&&(l.stringify=function(l,e,c){var d;t=f="";if("number"===typeof c)for(d=0;d<c;d+=1)t+=" ";else"string"===typeof c&&(t=c);if((m=e)&&"function"!==typeof e&&
("object"!==typeof e||"number"!==typeof e.length))throw Error("JSON.stringify");return p("",{"":l})});"function"!==typeof l.parse&&(l.parse=function(f,e){function c(d,f){var a,b,g=d[f];if(g&&"object"===typeof g)for(a in g)Object.prototype.hasOwnProperty.call(g,a)&&(b=c(g,a),void 0!==b?g[a]=b:delete g[a]);return e.call(d,f,g)}var d;f=String(f);q.lastIndex=0;q.test(f)&&(f=f.replace(q,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(f.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+f+")"),"function"===typeof e?c({"":d},""):d;throw new SyntaxError("JSON.parse");});return l}()),"undefined"===typeof es5inited&&(es5inited=!0,function(){function r(){}function x(n){n=+n;n!==n?n=0:0!==n&&n!==1/0&&n!==-(1/0)&&(n=(0<n||-1)*Math.floor(Math.abs(n)));return n}function p(n){var a=typeof n;return null===n||"undefined"===a||"boolean"===a||"number"===a||
"string"===a}Function.prototype.bind||(Function.prototype.bind=function(n){var a=this;if("function"!=typeof a)throw new TypeError("Function.prototype.bind called on incompatible "+a);for(var e=v.call(arguments,1),h=Math.max(0,a.length-e.length),d=[],b=0;b<h;b++)d.push("$"+b);var c=Function("binder","return function("+d.join(",")+"){return binder.apply(this,arguments)}")(function(){if(this instanceof c){var h=a.apply(this,e.concat(v.call(arguments)));return Object(h)===h?h:this}return a.apply(n,e.concat(v.call(arguments)))});
a.prototype&&(r.prototype=a.prototype,c.prototype=new r,r.prototype=null);return c});var l=Function.prototype.call,q=Object.prototype,v=Array.prototype.slice,f=l.bind(q.toString),t=l.bind(q.hasOwnProperty);t(q,"__defineGetter__")&&(l.bind(q.__defineGetter__),l.bind(q.__defineSetter__),l.bind(q.__lookupGetter__),l.bind(q.__lookupSetter__));if(2!=[1,2].splice(0).length){var s=Array.prototype.splice,m=Array.prototype.push,y=Array.prototype.unshift;(function(){function n(n){for(var a=[];n--;)a.unshift(n);
return a}var a=[],e;a.splice.bind(a,0,0).apply(null,n(20));a.splice.bind(a,0,0).apply(null,n(26));e=a.length;a.splice(5,0,"XXX");if(e+1==a.length)return!0})()?Array.prototype.splice=function(n,a){return arguments.length?s.apply(this,[void 0===n?0:n,void 0===a?this.length-n:a].concat(v.call(arguments,2))):[]}:Array.prototype.splice=function(n,a){var e,h=v.call(arguments,2);e=h.length;if(!arguments.length)return[];void 0===n&&(n=0);void 0===a&&(a=this.length-n);if(0<e){if(0>=a){if(n==this.length)return m.apply(this,
h),[];if(0==n)return y.apply(this,h),[]}e=v.call(this,n,n+a);h.push.apply(h,v.call(this,n+a,this.length));h.unshift.apply(h,v.call(this,0,n));h.unshift(0,this.length);s.apply(this,h);return e}return s.call(this,n,a)}}1!=[].unshift(0)&&(y=Array.prototype.unshift,Array.prototype.unshift=function(){y.apply(this,arguments);return this.length});Array.isArray||(Array.isArray=function(a){return"[object Array]"==f(a)});var l=Object("a"),e="a"!=l[0]||!(0 in l),c=!0;Array.prototype.forEach&&Array.prototype.forEach.call("foo",
function(a,e,d){"object"!==typeof d&&(c=!1)});Array.prototype.forEach&&c||(Array.prototype.forEach=function(a,A){var d=z(this),h=e&&"[object String]"==f(this)?this.split(""):d,b=-1,c=h.length>>>0;if("[object Function]"!=f(a))throw new TypeError;for(;++b<c;)b in h&&a.call(A,h[b],b,d)});Array.prototype.map||(Array.prototype.map=function(a,A){var d=z(this),h=e&&"[object String]"==f(this)?this.split(""):d,b=h.length>>>0,c=Array(b);if("[object Function]"!=f(a))throw new TypeError(a+" is not a function");
for(var g=0;g<b;g++)g in h&&(c[g]=a.call(A,h[g],g,d));return c});Array.prototype.filter||(Array.prototype.filter=function(a,d){var b=z(this),h=e&&"[object String]"==f(this)?this.split(""):b,c=h.length>>>0,g=[],k;if("[object Function]"!=f(a))throw new TypeError(a+" is not a function");for(var B=0;B<c;B++)B in h&&(k=h[B],a.call(d,k,B,b)&&g.push(k));return g});Array.prototype.every||(Array.prototype.every=function(a,d){var b=z(this),h=e&&"[object String]"==f(this)?this.split(""):b,c=h.length>>>0;if("[object Function]"!=
f(a))throw new TypeError(a+" is not a function");for(var g=0;g<c;g++)if(g in h&&!a.call(d,h[g],g,b))return!1;return!0});Array.prototype.some||(Array.prototype.some=function(a,b){var d=z(this),h=e&&"[object String]"==f(this)?this.split(""):d,c=h.length>>>0;if("[object Function]"!=f(a))throw new TypeError(a+" is not a function");for(var g=0;g<c;g++)if(g in h&&a.call(b,h[g],g,d))return!0;return!1});Array.prototype.reduce||(Array.prototype.reduce=function(a){var d=z(this),b=e&&"[object String]"==f(this)?
this.split(""):d,h=b.length>>>0;if("[object Function]"!=f(a))throw new TypeError(a+" is not a function");if(!h&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var c=0,g;if(2<=arguments.length)g=arguments[1];else{do{if(c in b){g=b[c++];break}if(++c>=h)throw new TypeError("reduce of empty array with no initial value");}while(1)}for(;c<h;c++)c in b&&(g=a.call(void 0,g,b[c],c,d));return g});Array.prototype.reduceRight||(Array.prototype.reduceRight=function(a){var b=
z(this),d=e&&"[object String]"==f(this)?this.split(""):b,h=d.length>>>0;if("[object Function]"!=f(a))throw new TypeError(a+" is not a function");if(!h&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var c,h=h-1;if(2<=arguments.length)c=arguments[1];else{do{if(h in d){c=d[h--];break}if(0>--h)throw new TypeError("reduceRight of empty array with no initial value");}while(1)}if(0>h)return c;do h in this&&(c=a.call(void 0,c,d[h],h,b));while(h--);return c});
Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(a){var c=e&&"[object String]"==f(this)?this.split(""):z(this),b=c.length>>>0;if(!b)return-1;var h=0;1<arguments.length&&(h=x(arguments[1]));for(h=0<=h?h:Math.max(0,b+h);h<b;h++)if(h in c&&c[h]===a)return h;return-1});Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(a){var c=e&&"[object String]"==f(this)?this.split(""):z(this),b=c.length>>>0;if(!b)return-1;var h=b-1;1<arguments.length&&
(h=Math.min(h,x(arguments[1])));for(h=0<=h?h:b-Math.abs(h);0<=h;h--)if(h in c&&a===c[h])return h;return-1});if(!Object.keys){var d=!0,k="toString toLocaleString valueOf hasOwnProperty isPrototypeOf propertyIsEnumerable constructor".split(" "),w=k.length,a;for(a in{toString:null})d=!1;Object.keys=function(a){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.keys called on a non-object");var c=[],b;for(b in a)t(a,b)&&c.push(b);if(d)for(b=0;b<w;b++){var h=k[b];t(a,h)&&
c.push(h)}return c}}Date.prototype.toISOString&&-1!==(new Date(-621987552E5)).toISOString().indexOf("-000001")||(Date.prototype.toISOString=function(){var a,b,c,h;if(!isFinite(this))throw new RangeError("Date.prototype.toISOString called on non-finite value.");h=this.getUTCFullYear();a=this.getUTCMonth();h+=Math.floor(a/12);a=[(a%12+12)%12+1,this.getUTCDate(),this.getUTCHours(),this.getUTCMinutes(),this.getUTCSeconds()];h=(0>h?"-":9999<h?"+":"")+("00000"+Math.abs(h)).slice(0<=h&&9999>=h?-4:-6);for(b=
a.length;b--;)c=a[b],10>c&&(a[b]="0"+c);return h+"-"+a.slice(0,2).join("-")+"T"+a.slice(2).join(":")+"."+("000"+this.getUTCMilliseconds()).slice(-3)+"Z"});a=!1;try{a=Date.prototype.toJSON&&null===(new Date(NaN)).toJSON()&&-1!==(new Date(-621987552E5)).toJSON().indexOf("-000001")&&Date.prototype.toJSON.call({toISOString:function(){return!0}})}catch(b){}a||(Date.prototype.toJSON=function(a){a=Object(this);var b;if(p(a))b=a;else if(b=a.valueOf,"function"!==typeof b||(b=b.call(a),!p(b)))if(b=a.toString,
"function"!==typeof b||(b=b.call(a),!p(b)))throw new TypeError;if("number"===typeof b&&!isFinite(b))return null;b=a.toISOString;if("function"!=typeof b)throw new TypeError("toISOString property is not callable");return b.call(a)});Date=function(a){function b(c,h,e,d,g,f,k){var l=arguments.length;return this instanceof a?(l=1==l&&String(c)===c?new a(b.parse(c)):7<=l?new a(c,h,e,d,g,f,k):6<=l?new a(c,h,e,d,g,f):5<=l?new a(c,h,e,d,g):4<=l?new a(c,h,e,d):3<=l?new a(c,h,e):2<=l?new a(c,h):1<=l?new a(c):
new a,l.constructor=b,l):a.apply(this,arguments)}function c(a,b){var h=1<b?1:0;return e[b]+Math.floor((a-1969+h)/4)-Math.floor((a-1901+h)/100)+Math.floor((a-1601+h)/400)+365*(a-1970)}var h=RegExp("^(\\d{4}|[+-]\\d{6})(?:-(\\d{2})(?:-(\\d{2})(?:T(\\d{2}):(\\d{2})(?::(\\d{2})(?:(\\.\\d{1,}))?)?(Z|(?:([-+])(\\d{2}):(\\d{2})))?)?)?)?$"),e=[0,31,59,90,120,151,181,212,243,273,304,334,365],d;for(d in a)b[d]=a[d];b.now=a.now;b.UTC=a.UTC;b.prototype=a.prototype;b.prototype.constructor=b;b.parse=function(b){var e=
h.exec(b);if(e){var d=Number(e[1]),g=Number(e[2]||1)-1,f=Number(e[3]||1)-1,k=Number(e[4]||0),l=Number(e[5]||0),u=Number(e[6]||0),w=Math.floor(1E3*Number(e[7]||0)),A=Boolean(e[4]&&!e[8]),q="-"===e[9]?1:-1,m=Number(e[10]||0),e=Number(e[11]||0);return k<(0<l||0<u||0<w?24:25)&&60>l&&60>u&&1E3>w&&-1<g&&12>g&&24>m&&60>e&&-1<f&&f<c(d,g+1)-c(d,g)&&(d=60*(24*(c(d,g)+f)+k+m*q),d=1E3*(60*(d+l+e*q)+u)+w,A&&(d=Number(new a(1970,0,1,0,0,0,d))),-864E13<=d&&864E13>=d)?d:NaN}return a.parse.apply(this,arguments)};
return b}(Date);Date.now||(Date.now=function(){return(new Date).getTime()});Number.prototype.toFixed&&"0.000"===(8E-5).toFixed(3)&&"0"!==(0.9).toFixed(0)&&"1.25"===(1.255).toFixed(2)&&"1000000000000000128"===(0xde0b6b3a7640080).toFixed(0)||function(){function a(b,c){for(var e=-1;++e<g;)c+=b*f[e],f[e]=c%d,c=Math.floor(c/d)}function b(a){for(var c=g,e=0;0<=--c;)e+=f[c],f[c]=Math.floor(e/a),e=e%a*d}function c(){for(var a=g,b="";0<=--a;)if(""!==b||0===a||0!==f[a])var e=String(f[a]),b=""===b?e:b+("0000000".slice(0,
7-e.length)+e);return b}function e(a,b,c){return 0===b?c:1===b%2?e(a,b-1,c*a):e(a*a,b/2,c)}var d,g,f;d=1E7;g=6;f=[0,0,0,0,0,0];Number.prototype.toFixed=function(d){var g,f,k;d=Number(d);d=d!==d?0:Math.floor(d);if(0>d||20<d)throw new RangeError("Number.toFixed called with invalid number of decimals");g=Number(this);if(g!==g)return"NaN";if(-1E21>=g||1E21<=g)return String(g);f="";0>g&&(f="-",g=-g);k="0";if(1E-21<g){k=g*e(2,69,1);for(var l=0;4096<=k;)l+=12,k/=4096;for(;2<=k;)l+=1,k/=2;k=l-69;g=0>k?g*
e(2,-k,1):g/e(2,k,1);g*=4503599627370496;k=52-k;if(0<k){a(0,g);for(g=d;7<=g;)a(1E7,0),g-=7;a(e(10,g,1),0);for(g=k-1;23<=g;)b(8388608),g-=23;b(1<<g);a(1,1);b(2);k=c()}else a(0,g),a(1<<-k,0),k=c()+"0.00000000000000000000".slice(2,2+d)}0<d?(g=k.length,k=g<=d?f+"0.0000000000000000000".slice(0,d-g+2)+k:f+k.slice(0,g-d)+"."+k.slice(g-d)):k=f+k;return k}}();var g=String.prototype.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||"".split(/.?/).length||
1<".".split(/()()/).length?function(){var a=void 0===/()??/.exec("")[1];String.prototype.split=function(b,c){var e=this;if(void 0===b&&0===c)return[];if("[object RegExp]"!==Object.prototype.toString.call(b))return g.apply(this,arguments);var d=[],k=(b.ignoreCase?"i":"")+(b.multiline?"m":"")+(b.extended?"x":"")+(b.sticky?"y":""),f=0;b=RegExp(b.source,k+"g");var l,u,w,e=e+"";a||(l=RegExp("^"+b.source+"$(?!\\s)",k));for(c=void 0===c?4294967295:c>>>0;u=b.exec(e);){k=u.index+u[0].length;if(k>f&&(d.push(e.slice(f,
u.index)),!a&&1<u.length&&u[0].replace(l,function(){for(var a=1;a<arguments.length-2;a++)void 0===arguments[a]&&(u[a]=void 0)}),1<u.length&&u.index<e.length&&Array.prototype.push.apply(d,u.slice(1)),w=u[0].length,f=k,d.length>=c))break;b.lastIndex===u.index&&b.lastIndex++}f===e.length?!w&&b.test("")||d.push(""):d.push(e.slice(f));return d.length>c?d.slice(0,c):d}}():"0".split(void 0,0).length&&(String.prototype.split=function(a,b){return void 0===a&&0===b?[]:g.apply(this,arguments)});if("".substr&&
"b"!=="0b".substr(-1)){var u=String.prototype.substr;String.prototype.substr=function(a,b){return u.call(this,0>a?0>(a=this.length+a)?0:a:a,b)}}a="\t\n\x0B\f\r \u00a0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||a.trim()){a="["+a+"]";var C=RegExp("^"+a+a+"*"),D=RegExp(a+a+"*$");String.prototype.trim=function(){if(void 0===this||null===this)throw new TypeError("can't convert "+this+" to object");return String(this).replace(C,
"").replace(D,"")}}var z=function(a){if(null==a)throw new TypeError("can't convert "+a+" to object");return Object(a)}}(),function(){function r(a){try{return a.sentinel=0,0===Object.getOwnPropertyDescriptor(a,"sentinel").value}catch(b){}}function x(a){try{return Object.defineProperty(a,"sentinel",{}),"sentinel"in a}catch(b){}}var p=Function.prototype.call,l=Object.prototype,q=p.bind(l.hasOwnProperty),v,f,t,s,m;if(m=q(l,"__defineGetter__"))v=p.bind(l.__defineGetter__),f=p.bind(l.__defineSetter__),
t=p.bind(l.__lookupGetter__),s=p.bind(l.__lookupSetter__);Object.getPrototypeOf||(Object.getPrototypeOf=function(a){return a.__proto__||(a.constructor?a.constructor.prototype:l)});if(Object.defineProperty&&(p=r({}),"undefined"!=typeof document&&!r(document.createElement("div"))||!p))var y=Object.getOwnPropertyDescriptor;if(!Object.getOwnPropertyDescriptor||y)Object.getOwnPropertyDescriptor=function(a,b){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+
a);if(y)try{return y.call(Object,a,b)}catch(c){}if(q(a,b)){var e={enumerable:!0,configurable:!0};if(m){var d=a.__proto__;a.__proto__=l;var k=t(a,b),f=s(a,b);a.__proto__=d;if(k||f)return k&&(e.get=k),f&&(e.set=f),e}e.value=a[b];e.writable=!0;return e}};Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(a){return Object.keys(a)});if(!Object.create){var e;e=null===Object.prototype.__proto__||"undefined"==typeof document?function(){return{__proto__:null}}:function(){function a(){}var b=
document.createElement("iframe"),c=document.body||document.documentElement;b.style.display="none";c.appendChild(b);b.src="javascript:";var d=b.contentWindow.Object.prototype;c.removeChild(b);b=null;delete d.constructor;delete d.hasOwnProperty;delete d.propertyIsEnumerable;delete d.isPrototypeOf;delete d.toLocaleString;delete d.toString;delete d.valueOf;d.__proto__=null;a.prototype=d;e=function(){return new a};return new a};Object.create=function(a,b){function d(){}var c;if(null===a)c=e();else{if("object"!==
typeof a&&"function"!==typeof a)throw new TypeError("Object prototype may only be an Object or null");d.prototype=a;c=new d;c.__proto__=a}void 0!==b&&Object.defineProperties(c,b);return c}}if(Object.defineProperty){var p=x({}),c="undefined"==typeof document||x(document.createElement("div"));if(!p||!c)var d=Object.defineProperty,k=Object.defineProperties}if(!Object.defineProperty||d)Object.defineProperty=function(a,b,c){if("object"!=typeof a&&"function"!=typeof a||null===a)throw new TypeError("Object.defineProperty called on non-object: "+
a);if("object"!=typeof c&&"function"!=typeof c||null===c)throw new TypeError("Property description must be an object: "+c);if(d)try{return d.call(Object,a,b,c)}catch(e){}if(q(c,"value"))if(m&&(t(a,b)||s(a,b))){var k=a.__proto__;a.__proto__=l;delete a[b];a[b]=c.value;a.__proto__=k}else a[b]=c.value;else{if(!m)throw new TypeError("getters & setters can not be defined on this javascript engine");q(c,"get")&&v(a,b,c.get);q(c,"set")&&f(a,b,c.set)}return a};if(!Object.defineProperties||k)Object.defineProperties=
function(a,b){if(k)try{return k.call(Object,a,b)}catch(c){}for(var d in b)q(b,d)&&"__proto__"!=d&&Object.defineProperty(a,d,b[d]);return a};Object.seal||(Object.seal=function(a){return a});Object.freeze||(Object.freeze=function(a){return a});try{Object.freeze(function(){})}catch(w){Object.freeze=function(a){return function(b){return"function"==typeof b?b:a(b)}}(Object.freeze)}Object.preventExtensions||(Object.preventExtensions=function(a){return a});Object.isSealed||(Object.isSealed=function(a){return!1});
Object.isFrozen||(Object.isFrozen=function(a){return!1});Object.isExtensible||(Object.isExtensible=function(a){if(Object(a)!==a)throw new TypeError;for(var b="";q(a,b);)b+="?";a[b]=!0;var c=q(a,b);delete a[b];return c})}()),function(){function r(){}function x(e,c){if(m[e])throw Error("Port '"+e+"' already exists.");var d=new y(e,c);m[e]=d;lego.miscellaneous.PortAddRef(e);return d}function p(e,c,d,k,f,a,b){function g(a){var b=!1,b=function(a){p.postMessage(a);p.destroy_();p=null};l?(b=(a=m.dispatch(a,
d,b))&&a.results&&-1<indexOf(a.results,!0),!b&&p&&(p.destroy_(),p=null)):m.dispatch(a,d,b)}var l=c==q,m=null,m=l?b?chrome.runtime.onMessageExternal:chrome.runtime.onMessage:b?chrome.extension.onRequestExternal:chrome.extension.onRequest;if(!m||!m.hasListeners())return!1;var p=x(e,c);p.onDestroy_=function(){p.onMessage.removeListener(g)};p.onMessage.addListener(g);return!0}function l(e,c,d){function k(){chrome.runtime&&chrome.runtime.lastError&&d()}function f(a){try{d(a)}finally{e.disconnect()}}e.name!=
v&&e.postMessage(c);e.name!=q||d?(d||(d=function(){}),e.onDestroy_=function(){e.onDisconnect.removeListener(k);e.onMessage.removeListener(f)},e.onDisconnect.addListener(k),e.onMessage.addListener(f)):e.disconnect()}var q="chrome.runtime.sendMessage",v="chrome.runtime.sendNativeMessage";["clearInterval","clearTimeout","alert","confirm"].forEach(function(e){eval(e+"=function(a){return window."+e+"(a);};")});["prompt","setInterval","setTimeout","getComputedStyle"].forEach(function(e){eval(e+"=function(a,b){return window."+
e+"(a,b);};")});"navigator screen history location document console Image Math".split(" ").forEach(function(e){eval(e+"=window."+e)});if(!document.head){var f=document.getElementsByTagName("head")[0];f&&(document.head=f)}window.getComputedStyle||(getComputedStyle=function(e){return e.currentStyle});Date.now&&(Date.now=function(){return(new Date).getTime()});console||(console={log:r,warn:r,error:r,dir:r});chrome={runtime:{id:"$${lego_id}$$"}};var t=function(e){console.log("Error:");console.log(e.message)},
s=function(){function e(){this.listeners_=[];this.destroyed_=null}e.prototype.addListener=function(c,d){if(this.destroyed_)throw"Event destroyed";this.listeners_.push(c);if(d)throw"Filter not supported";};e.prototype.dispatch=function(){if(this.destroyed_)throw"Event destroyed";for(var c=[],d=this.listeners_,e=d.length,f=0;f<e;++f){var a=d[f];if(a){try{var b=a.apply(null,arguments)}catch(g){t(g);continue}c.push(b)}}if(0<c.length)return{results:c}};e.prototype.removeListener=function(c,d){if(this.destroyed_)throw"Event destroyed";
for(var e=this.listeners_,f=e.length,a=0;a<f;++a){var b=e[a];b&&b===c&&(b[a]=null)}if(d)throw"Filter not supported";};e.prototype.destroy_=function(){this.listeners_.length=0;this.destroyed_=!0};e.prototype.hasListeners=function(){return 0!==this.listeners_.length};return e}();chrome.runtime.onConnectExternal=new s;chrome.runtime.onConnect=new s;chrome.runtime.onMessageExternal=new s;chrome.runtime.onMessage=new s;chrome.runtime.onRequestExternal=new s;chrome.runtime.onRequest=new s;var m={},y=function(){function e(c,
d){this.portId_=c;this.name=d;this.onDisconnect=new s;this.onMessage=new s;this.destroyed_=this.onDestroy_=null}e.prototype.postMessage=function(c){if(this.destroyed_)throw"Port destroyed";void 0===c&&(c=null);c=JSON.stringify(c);void 0===c?t("Illegal argument to Port.postMessage"):lego.miscellaneous.PostMessage("$${lego_sec_key}$$",this.portId_,c)};e.prototype.disconnect=function(){if(this.destroyed_)throw"Port destroyed";lego.miscellaneous.CloseChannel("$${lego_sec_key}$$",this.portId_,!0);this.destroy_()};
e.prototype.destroy_=function(){if(this.destroyed_)throw"Port destroyed";var c=this.portId_;if(this.onDestroy_)this.onDestroy_();this.onDisconnect.destroy_();this.onMessage.destroy_();delete m[c]};return e}();lego.miscellaneous.AddListenerOnHasPort("$${lego_sec_key}$$",function(e){return e in m});lego.miscellaneous.AddListenerOnConnect("$${lego_sec_key}$$",function(e,c,d,f,l){if("$${lego_id}$$"!=f)return!1;var a="$${lego_id}$$"!=d,b={};""!=d&&(b.id=d);l&&(b.url=l);if("chrome.extension.sendRequest"==
c||c==q)return p(e,c,b,d,f,l,a);d=a?chrome.runtime.onConnectExternal:chrome.runtime.onConnect;if(!d||!d.hasListeners())return!1;e=x(e,c);e.sender=b;d.dispatch(e);return!0});lego.miscellaneous.AddListenerOnDisconnect("$${lego_sec_key}$$",function(e,c){var d=m[e];if(d){lego.miscellaneous.CloseChannel("$${lego_sec_key}$$",e,!1);c&&t(c);try{d.onDisconnect.dispatch(d)}catch(f){t(f)}d.destroy_()}});lego.miscellaneous.AddListenerOnMessage("$${lego_sec_key}$$",function(e,c){var d=m[e];d&&(c&&(c=JSON.parse(c)),
d.onMessage.dispatch(c,d))});chrome.runtime.connect=function(e,c){var d,f;switch(arguments.length){case 1:"string"===typeof arguments[0]?f=arguments[0]:d=arguments[0].name;break;case 2:f=arguments[0],d=arguments[1].name}d=d||"";f=lego.runtime.OpenChannelToExtension("$${lego_sec_key}$$","$${lego_id}$$",f||"$${lego_id}$$",d);return x(f,d)};chrome.runtime.sendMessage=function(e,c,d){var f,m,a;switch(arguments.length){case 0:throw"Message not provided";case 1:m=arguments[0];break;case 2:"string"!==typeof arguments[1]&&
"function"===arguments[1].toString().slice(0,8)?(m=arguments[0],a=arguments[1]):(f=arguments[0],m=arguments[1]);break;case 3:f=e,m=c,a=d}m=m||null;a=a||r;f=chrome.runtime.connect(f||"$${lego_id}$$",{name:q});l(f,m,a)}}());
