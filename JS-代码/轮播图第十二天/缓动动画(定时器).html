<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <style>
        *{
            margin: 0;
            padding: 0;
        }
        #box{
            width: 100px;
            height: 100px;
            background-color: red;
            position: absolute;
        }
    </style>
</head>
<body>
<button id="btn1">奔跑吧</button>
<div id="box"></div>

<script>
    var box = document.getElementById("box");
    var btn1 = document.getElementById("btn1");
    var btn2 = document.getElementById("btn2");
    var timer = null;

    btn1.onclick = function () {
        animate(box, {"width": 350, "height": 150, "top": 350, "left": 150});
    };
    function animate(tag, obj) {
        clearInterval(tag.timer);
        tag.timer = setInterval(function () {
            var flag = true;
            for (var key in obj) {
                var leader = parseInt(getStyle(tag, key));
                var step = (obj[key] - leader) / 10;
                step = step > 0 ? Math.ceil(step) : Math.floor(step);
                leader = leader + step;
                console.log("leader:" + leader + " step:" + step);
                tag.style[key] = leader + "px";
                if(leader != obj[key]){
                    flag = false;
                }
            }
            if (flag) {
                clearInterval(tag.timer);
            }
        }, 20);
    }
    function getStyle(tag, attr) {
        return tag.currentStyle ? tag.currentStyle[attr] : getComputedStyle(tag, null)[attr];
    }
</script>
</body>
</html>


<!--<body>-->
<!--<button id="btn1">奔跑到200吧少年</button>-->
<!--&lt;!&ndash;<button id="btn2">奔跑到400吧少年</button>&ndash;&gt;-->
<!--<div id="box"></div>-->

<!--<script>-->
    <!--var box = document.getElementById("box");-->
    <!--var btn1 = document.getElementById("btn1");-->
    <!--var btn2 = document.getElementById("btn2");-->
    <!--var timer = null;-->
    <!--btn1.onclick = function () {-->
        <!--animate(box, {"width": 350, "height": 150, "top": 350, "left": 150});-->
    <!--};-->
    <!--function animate(tag, obj) {-->
        <!--clearInterval(tag.timer);-->
        <!--tag.timer = setInterval(function () {-->
            <!--//假设所有的属性都到达目标位置-->
            <!--var flag = true;-->
            <!--//遍历传入的对象-->
            <!--for (var key in obj) {-->
                <!--var leader = parseInt(getStyle(tag, key));-->
                <!--//缓动动画公式就是动态的改变了每一次走的步长-->
                <!--var step = ( obj[key] - leader ) / 10-->
                <!--//需要根据steo的正负，来判断取整方式-->
                <!--step = step > 0 ? Math.ceil(step) : Math.floor(step);-->
                <!--leader = leader + step-->
                <!--console.log("leader:" + leader + " step:" + step);-->
                <!--tag.style[key] = leader + "px";-->
                <!--//检测是否每一个属性都到达了目标值-->
                <!--if (leader != obj[key]) {-->
                    <!--//有任意一个属性没到达，让flag为false，阻止定时器停止-->
                    <!--flag = false;-->
                <!--}-->
            <!--}-->
            <!--if (flag) {-->
                <!--clearInterval(tag.timer);-->
            <!--}-->
        <!--}, 20);-->
    <!--}-->
    <!--function getStyle(tag, attr) {-->
        <!--return tag.currentStyle ? tag.currentStyle[attr] : getComputedStyle(tag, null)[attr];-->
    <!--}-->
<!--</script>-->
<!--</body>-->